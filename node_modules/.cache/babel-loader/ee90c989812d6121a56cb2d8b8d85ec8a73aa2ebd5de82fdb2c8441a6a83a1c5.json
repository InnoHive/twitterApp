{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  loggedIn: undefined,\n  fromRegister: false,\n  error: false\n};\nexport const loginUser = createAsyncThunk('user/login', async (body, thunkAPI) => {\n  try {\n    const req = await axios.post('http://localhost:8050/auth/login', body);\n    return req.data;\n  } catch (e) {\n    thunkAPI.rejectWithValue(e);\n  }\n});\nexport const UserSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setFromRegister(state, action) {\n      state = {\n        ...state,\n        fromRegister: action.payload\n      };\n      return state;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loginUser.fulfilled, (state, action) => {\n      state = {\n        ...state,\n        loggedIn: {\n          userId: action.payload.user.userId,\n          firstName: action.payload.user.firstName,\n          lastName: action.payload.user.lastName,\n          email: action.payload.user.email,\n          phone: action.payload.user.phone,\n          dateOfBirth: action.payload.user.dateOfBirth,\n          username: action.payload.user.username,\n          bio: action.payload.user.bio,\n          nickname: action.payload.user.nickname,\n          profilePicture: action.payload.user.profilePicture,\n          bannerPicture: action.payload.user.bannerPicture\n        }\n      };\n      return state;\n    });\n  }\n});\nexport const {\n  setFromRegister\n} = UserSlice.actions;\nexport default UserSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","loggedIn","undefined","fromRegister","error","loginUser","body","thunkAPI","req","post","data","e","rejectWithValue","UserSlice","name","reducers","setFromRegister","state","action","payload","extraReducers","builder","addCase","fulfilled","userId","user","firstName","lastName","email","phone","dateOfBirth","username","bio","nickname","profilePicture","bannerPicture","actions","reducer"],"sources":["/Users/nana/Desktop/twitterApp/frontend/src/redux/Slices/UserSlice.tsx"],"sourcesContent":["import { createAsyncThunk, createSlice,PayloadAction } from \"@reduxjs/toolkit\";\nimport { User } from \"../../utils/GlobalInterfaces\";\nimport axios from \"axios\";\n\n\ninterface UserSliceState{\n    loggedIn: User | undefined;\n    fromRegister: boolean;\n    error: boolean;\n}\n\ninterface LoginBody{\n    username: string;\n    password: string;\n}\n\nconst initialState:UserSliceState  = {\n    loggedIn: undefined,\n    fromRegister: false,\n    error: false,\n}\n\n\nexport const loginUser = createAsyncThunk(\n    'user/login',\n    async (body:LoginBody, thunkAPI ) => {\n        try{\n            const req = await axios.post('http://localhost:8050/auth/login', body);\n            return req.data;\n        }catch(e){\n            thunkAPI.rejectWithValue(e);\n        }\n    }\n)\n\nexport const UserSlice = createSlice({\n    name: 'user',\n    initialState,\n    reducers: {\n        setFromRegister(state, action:PayloadAction<boolean>){\n            state = {\n                ...state,\n                fromRegister: action.payload,\n            }\n            return state;\n        }\n    },\n\n\n    extraReducers: (builder) => {\n        builder.addCase(loginUser.fulfilled, (state, action) =>{\n            state = {\n                ...state,\n                loggedIn: {\n                    userId: action.payload.user.userId,\n                    firstName: action.payload.user.firstName,\n                    lastName: action.payload.user.lastName,\n                    email: action.payload.user.email,\n                    phone: action.payload.user.phone,\n                    dateOfBirth: action.payload.user.dateOfBirth,\n                    username: action.payload.user.username,\n                    bio: action.payload.user.bio,\n                    nickname: action.payload.user.nickname,\n                    profilePicture: action.payload.user.profilePicture,\n                    bannerPicture: action.payload.user.bannerPicture,\n                }\n            }\n            \n            return state;\n        })\n    }\n});\n\nexport const {setFromRegister} = UserSlice.actions;\n\nexport default UserSlice.reducer;"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAsB,kBAAkB;AAE9E,OAAOC,KAAK,MAAM,OAAO;AAczB,MAAMC,YAA2B,GAAI;EACjCC,QAAQ,EAAEC,SAAS;EACnBC,YAAY,EAAE,KAAK;EACnBC,KAAK,EAAE;AACX,CAAC;AAGD,OAAO,MAAMC,SAAS,GAAGR,gBAAgB,CACrC,YAAY,EACZ,OAAOS,IAAc,EAAEC,QAAQ,KAAM;EACjC,IAAG;IACC,MAAMC,GAAG,GAAG,MAAMT,KAAK,CAACU,IAAI,CAAC,kCAAkC,EAAEH,IAAI,CAAC;IACtE,OAAOE,GAAG,CAACE,IAAI;EACnB,CAAC,QAAMC,CAAC,EAAC;IACLJ,QAAQ,CAACK,eAAe,CAACD,CAAC,CAAC;EAC/B;AACJ,CACJ,CAAC;AAED,OAAO,MAAME,SAAS,GAAGf,WAAW,CAAC;EACjCgB,IAAI,EAAE,MAAM;EACZd,YAAY;EACZe,QAAQ,EAAE;IACNC,eAAeA,CAACC,KAAK,EAAEC,MAA6B,EAAC;MACjDD,KAAK,GAAG;QACJ,GAAGA,KAAK;QACRd,YAAY,EAAEe,MAAM,CAACC;MACzB,CAAC;MACD,OAAOF,KAAK;IAChB;EACJ,CAAC;EAGDG,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CAACC,OAAO,CAACjB,SAAS,CAACkB,SAAS,EAAE,CAACN,KAAK,EAAEC,MAAM,KAAI;MACnDD,KAAK,GAAG;QACJ,GAAGA,KAAK;QACRhB,QAAQ,EAAE;UACNuB,MAAM,EAAEN,MAAM,CAACC,OAAO,CAACM,IAAI,CAACD,MAAM;UAClCE,SAAS,EAAER,MAAM,CAACC,OAAO,CAACM,IAAI,CAACC,SAAS;UACxCC,QAAQ,EAAET,MAAM,CAACC,OAAO,CAACM,IAAI,CAACE,QAAQ;UACtCC,KAAK,EAAEV,MAAM,CAACC,OAAO,CAACM,IAAI,CAACG,KAAK;UAChCC,KAAK,EAAEX,MAAM,CAACC,OAAO,CAACM,IAAI,CAACI,KAAK;UAChCC,WAAW,EAAEZ,MAAM,CAACC,OAAO,CAACM,IAAI,CAACK,WAAW;UAC5CC,QAAQ,EAAEb,MAAM,CAACC,OAAO,CAACM,IAAI,CAACM,QAAQ;UACtCC,GAAG,EAAEd,MAAM,CAACC,OAAO,CAACM,IAAI,CAACO,GAAG;UAC5BC,QAAQ,EAAEf,MAAM,CAACC,OAAO,CAACM,IAAI,CAACQ,QAAQ;UACtCC,cAAc,EAAEhB,MAAM,CAACC,OAAO,CAACM,IAAI,CAACS,cAAc;UAClDC,aAAa,EAAEjB,MAAM,CAACC,OAAO,CAACM,IAAI,CAACU;QACvC;MACJ,CAAC;MAED,OAAOlB,KAAK;IAChB,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAACD;AAAe,CAAC,GAAGH,SAAS,CAACuB,OAAO;AAElD,eAAevB,SAAS,CAACwB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}